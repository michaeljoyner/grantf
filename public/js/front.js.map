{"version":3,"names":[],"mappings":"","sources":["front.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar AjaxContactForm = function AjaxContactForm(formEl) {\n    this.formEl = formEl;\n    this.errorBox = null;\n};\n\nAjaxContactForm.prototype = {\n\n    init: function init() {\n        var reset = document.getElementById('cf-reset');\n        reset.addEventListener('click', this.formReset.bind(this), false);\n        this.formEl.onsubmit = this.handleSubmit.bind(this);\n        this.setupErrorBox();\n    },\n\n    sendForm: function sendForm() {\n        var fd = new window.FormData(this.formEl);\n        var req = new window.XMLHttpRequest();\n        var self = this;\n        self.clearErrors();\n        req.open('POST', this.formEl.getAttribute('action'), true);\n        req.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        req.onreadystatechange = function (ev) {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    self.showSuccess();\n                } else {\n                    self.failResponse(req.status);\n                }\n            }\n        };\n        req.send(fd);\n        return false;\n    },\n\n    handleSubmit: function handleSubmit(ev) {\n        if (!window.FormData) return true;\n        ev.preventDefault();\n        this.sendForm();\n        return false;\n    },\n\n    showSuccess: function showSuccess() {\n        this.formEl.className += ' closed';\n    },\n\n    failResponse: function failResponse(status) {\n        if (status >= 500) {\n            this.showErrorMessage('Sorry! There was a problem on our side. Please try again later');\n            return;\n        }\n\n        if (status === 422) {\n            this.showErrorMessage('There was a problem with your input. Please check and try again. All fields are required');\n            return;\n        }\n\n        this.showErrorMessage('Oops! Something went wrong. Sorry. Please try again.');\n    },\n\n    formReset: function formReset() {\n        this.formEl.reset();\n        this.formEl.className = 'gdb-form';\n    },\n\n    setupErrorBox: function setupErrorBox() {\n        var box = document.createElement('div');\n        box.setAttribute('class', 'cf-error-box');\n        this.errorBox = this.formEl.insertBefore(box, this.formEl.firstChild);\n    },\n\n    showErrorMessage: function showErrorMessage(message) {\n        this.errorBox.innerHTML += \"<p>\" + message + \"</p>\";\n    },\n\n    clearErrors: function clearErrors() {\n        this.errorBox.innerHTML = '';\n    }\n};\n\nmodule.exports = AjaxContactForm;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nvar NewsletterSignup = {\n    formEl: document.querySelector('#newsletter-form'),\n\n    handleSubmit: function handleSubmit(ev) {\n        NewsletterSignup.formEl.classList.remove('failed');\n        ev.preventDefault();\n        var req = new XMLHttpRequest();\n        var fd = new FormData(NewsletterSignup.formEl);\n\n        req.open('POST', '/newsletter/subscribe');\n\n        req.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        req.onreadystatechange = function (ev) {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    NewsletterSignup.showSuccess(ev);\n                } else {\n                    NewsletterSignup.failResponse(req.status);\n                }\n            }\n        };\n        req.send(fd);\n        return false;\n    },\n    showSuccess: function showSuccess(ev) {\n        NewsletterSignup.formEl.classList.add('success');\n    },\n    failResponse: function failResponse(status) {\n        if (status === 400) {\n            return NewsletterSignup.setResponseTextAndClass('You are already subscribed', 'spent');\n        }\n\n        if (status === 422) {\n            return NewsletterSignup.formEl.classList.add('invalid');\n        }\n\n        NewsletterSignup.setResponseTextAndClass('Oops, something went wrong. Please try again later.', 'failed');\n    },\n    setResponseTextAndClass: function setResponseTextAndClass(message, formClass) {\n        document.querySelector('#newsletter-form .success-panel').innerHTML = message;\n        NewsletterSignup.formEl.classList.add(formClass);\n    }\n};\n\nmodule.exports = NewsletterSignup;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar NewsletterUnsubscribe = {\n    formEl: document.querySelector('#newsletter-unsubscribe'),\n\n    handleSubmit: function handleSubmit(ev) {\n        NewsletterUnsubscribe.formEl.classList.remove('failed');\n        ev.preventDefault();\n        var req = new XMLHttpRequest();\n        var fd = new FormData(NewsletterUnsubscribe.formEl);\n\n        req.open('POST', '/newsletter/unsubscribe');\n\n        req.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        req.onreadystatechange = function (ev) {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    NewsletterUnsubscribe.showSuccess(ev);\n                } else {\n                    NewsletterUnsubscribe.failResponse(req.status);\n                }\n            }\n        };\n        req.send(fd);\n        return false;\n    },\n    showSuccess: function showSuccess(ev) {\n        NewsletterUnsubscribe.setResponseTextAndClass('You have been unsubcribed', 'success');\n    },\n    failResponse: function failResponse(status) {\n        if (status === 400) {\n            return NewsletterUnsubscribe.setResponseTextAndClass('That email address is not on the mailing list', 'spent');\n        }\n\n        if (status === 422) {\n            return NewsletterUnsubscribe.formEl.classList.add('invalid');\n        }\n\n        NewsletterUnsubscribe.setResponseTextAndClass('Oops, something went wrong. Please try again later.', 'failed');\n    },\n    setResponseTextAndClass: function setResponseTextAndClass(message, formClass) {\n        document.querySelector('#newsletter-unsubscribe .success-panel').innerHTML = message;\n        NewsletterUnsubscribe.formEl.classList.add(formClass);\n    }\n};\n\nmodule.exports = NewsletterUnsubscribe;\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nvar app = app || {};\nvar ContactForm = require('./components/contactform.js');\nvar NewsletterSignup = require('./components/newslettersignup.js');\nvar NewsletterUnsubscribe = require('./components/newsletterunsubscribe.js');\n\napp.init = function () {\n    console.log('init');\n    app.registerListeners();\n};\n\napp.toggleNavMenu = function (ev) {\n    ev.preventDefault();\n    var nav = document.querySelector('.main-navbar');\n    if (nav.classList.contains('open')) {\n        return nav.classList.remove('open');\n    }\n\n    return nav.classList.add('open');\n};\n\napp.registerListeners = function () {\n    var menuToggles = document.querySelectorAll('.menu-toggle');\n\n    [].slice.call(menuToggles).forEach(function (item) {\n        item.addEventListener('click', app.toggleNavMenu, false);\n    });\n};\n\nif (document.querySelector('#gf-contact-form')) {\n    var contactForm = new ContactForm(document.querySelector('#gf-contact-form'));\n    contactForm.init();\n}\n\nif (document.querySelector('#newsletter-form')) {\n    document.querySelector('#newsletter-form').addEventListener('submit', NewsletterSignup.handleSubmit, false);\n}\n\nif (document.querySelector('#newsletter-unsubscribe')) {\n    document.querySelector('#newsletter-unsubscribe').addEventListener('submit', NewsletterUnsubscribe.handleSubmit, false);\n}\n\nwindow.myapp = app;\n\nwindow.myapp.init();\n\n},{\"./components/contactform.js\":1,\"./components/newslettersignup.js\":2,\"./components/newsletterunsubscribe.js\":3}]},{},[4]);\n"],"file":"front.js","sourceRoot":"/source/"}